<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="hljKlMsU2SXcxNs19upKC7c-yN09EjgKqMi2zR2Ojgg">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog.kevinyang.net","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="CK&#39;s Notepad">
<meta property="og:url" content="http://blog.kevinyang.net/page/26/index.html">
<meta property="og:site_name" content="CK&#39;s Notepad">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="KevinYang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://blog.kevinyang.net/page/26/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-TW'
  };
</script>

  <title>CK's Notepad</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-56711593-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-56711593-1');
      }
    </script>


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: 'ca-pub-7997572949867824',
          enable_page_level_ads: true
     });
</script>







  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="CK's Notepad" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">CK's Notepad</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分類</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>歸檔</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>標籤</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜尋
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜尋..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://blog.kevinyang.net/2016/04/14/angular2-play-with-redux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4550568.jpg">
      <meta itemprop="name" content="KevinYang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CK's Notepad">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/04/14/angular2-play-with-redux/" class="post-title-link" itemprop="url">[Angular] play with Redux part 1</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2016-04-15 07:09:00" itemprop="dateCreated datePublished" datetime="2016-04-15T07:09:00+08:00">2016-04-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Angular/" itemprop="url" rel="index"><span itemprop="name">Angular</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2016/04/14/angular2-play-with-redux/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/14/angular2-play-with-redux/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Redux是根據Facebook的flux所產出的一個架構. 簡單介紹請參考<a target="_blank" rel="noopener" href="https://youtu.be/s9AC8KTcce8">這裡</a></p>
<p>簡單的動作及資料流程如下
<img src="http://user-image.logdown.io/user/4862/blog/4871/post/710542/PhIpkTcMTvOGWU1XGjfY_Untitled%20Diagram.png" alt="Untitled Diagram.png"></p>
<p>複雜一點的流程圖如下
<img src="http://user-image.logdown.io/user/4862/blog/4871/post/710542/6Or79jM8QmuFVuhUhrJu_moreDetailReduxFlow.png" alt="moreDetailReduxFlow.png"></p>
<p>每一個階段都有他應該要做的事情
- Action: 處理資料，呼叫API, 任何有可能產生副作用的行為都在這階段處理, 通常都是回傳JSON object.<br>
- Reducer: 根據Action傳來的動作和資料，來決定與原本的資料(In Store)的關係，例如、新增、更新、移除或過濾等,回傳要顯示在View上面的資料</p>
<p>##程式碼
@Component程式的基本架構</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    <span class="title class_">Component</span>,    </span><br><span class="line">    <span class="title class_">Inject</span>,</span><br><span class="line">    <span class="title class_">ApplicationRef</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;angular2/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">TodoAction</span> <span class="keyword">from</span> <span class="string">&#x27;../../actions/ToDo&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@<span class="title class_">Component</span>(&#123;</span><br><span class="line">    <span class="attr">selector</span>: <span class="string">&#x27;ck-todo-app&#x27;</span>,    </span><br><span class="line">    <span class="attr">template</span>: <span class="built_in">require</span>(<span class="string">&#x27;./TodoPage.html&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CkTodoApp</span> &#123;</span><br><span class="line">    private <span class="attr">disconnect</span>: <span class="title class_">Function</span>;</span><br><span class="line">    private <span class="attr">unsubscribe</span>: <span class="title class_">Function</span>;</span><br><span class="line">        </span><br><span class="line">    private <span class="attr">items</span>: any;</span><br><span class="line">    private <span class="attr">task</span>: any;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        @Inject(<span class="string">&#x27;ngRedux&#x27;</span>) private ngRedux,</span></span><br><span class="line"><span class="params">        private applicationRef: ApplicationRef</span>) &#123;       </span><br><span class="line">    &#125;    </span><br><span class="line"></span><br><span class="line">    <span class="title function_">ngOnInit</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">disconnect</span> = <span class="variable language_">this</span>.<span class="property">ngRedux</span>.<span class="title function_">connect</span>(</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">mapStateToThis</span>,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">mapDispatchToThis</span>)(<span class="variable language_">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">unsubscribe</span> = <span class="variable language_">this</span>.<span class="property">ngRedux</span>.<span class="title function_">subscribe</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">applicationRef</span>.<span class="title function_">tick</span>();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">ngOnDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">unsubscribe</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">disconnect</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 註冊store到變數上</span></span><br><span class="line">    <span class="title function_">mapStateToThis</span>(<span class="params">state</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">items</span>: state.<span class="property">todo</span>,</span><br><span class="line">            <span class="attr">task</span>: state.<span class="property">newtodo</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    <span class="comment">// 註冊功能到這個Class裡</span></span><br><span class="line">    <span class="title function_">mapDispatchToThis</span>(<span class="params">dispatch</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">add</span>: <span class="function">(<span class="params">task</span>) =&gt;</span> <span class="title function_">dispatch</span>(<span class="title class_">TodoAction</span>.<span class="title function_">add</span>(<span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, task))),</span><br><span class="line">            <span class="attr">remove</span>: <span class="function">(<span class="params">task</span>) =&gt;</span> <span class="title function_">dispatch</span>(<span class="title class_">TodoAction</span>.<span class="title function_">remove</span>(task))</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>TodoPage.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;clearfix mx-auto col-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>TODO App<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;clearfix mxn2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> [(<span class="attr">ngModel</span>)]=<span class="string">&quot;task.content&quot;</span> <span class="attr">class</span>=<span class="string">&quot;input inline-block&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary inline-block&quot;</span> (<span class="attr">click</span>)=<span class="string">&quot;add(task)&quot;</span>&gt;</span>Add<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;clearfix mxn2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;list-reset&quot;</span> *<span class="attr">ngFor</span>=<span class="string">&quot;#item of items&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; item.content &#125;&#125; <span class="tag">&lt;<span class="name">span</span> (<span class="attr">click</span>)=<span class="string">&quot;remove(item)&quot;</span>&gt;</span>x<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>###註冊Store as provider in Angular2 application</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; enableProdMode, provide &#125; <span class="keyword">from</span> <span class="string">&#x27;angular2/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; bootstrap&#125; <span class="keyword">from</span> <span class="string">&#x27;angular2/bootstrap&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable constant_">ROUTER_PROVIDERS</span>, <span class="variable constant_">APP_BASE_HREF</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;angular2/router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CkDemoApp</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./containers/main-app&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 註冊redux store用</span></span><br><span class="line"><span class="keyword">import</span> configureStore <span class="keyword">from</span> <span class="string">&#x27;./store/configure-store&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> provider = <span class="built_in">require</span>(<span class="string">&#x27;ng2-redux&#x27;</span>).<span class="property">provider</span>;</span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">configureStore</span>(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">declare <span class="keyword">let</span> <span class="attr">__PRODUCTION__</span>: any;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (__PRODUCTION__) &#123;</span><br><span class="line">    <span class="title function_">enableProdMode</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">bootstrap</span>(<span class="title class_">CkDemoApp</span>, [</span><br><span class="line">    <span class="title function_">provider</span>(store),</span><br><span class="line">    <span class="variable constant_">ROUTER_PROVIDERS</span>,</span><br><span class="line">    <span class="title function_">provide</span>(<span class="variable constant_">APP_BASE_HREF</span>, &#123; <span class="attr">useValue</span>: <span class="string">&#x27;/&#x27;</span> &#125;)</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>
<p>store/configureStore</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">///&lt;reference path=&quot;./dev-types.d.ts&quot;/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;createStore, applyMiddleware, compose&#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;fromJS&#125; <span class="keyword">from</span> <span class="string">&#x27;immutable&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReduxThunk</span> <span class="keyword">from</span> <span class="string">&#x27;redux-thunk&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> rootReducer <span class="keyword">from</span> <span class="string">&#x27;../reducers&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> persistState = <span class="built_in">require</span>(<span class="string">&#x27;redux-localstorage&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">configureStore</span>(<span class="params">initialState</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> store = <span class="title function_">compose</span>(</span><br><span class="line">        <span class="title function_">_getMiddleware</span>()</span><br><span class="line">    )(createStore)(rootReducer, initialState);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> store;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">_getMiddleware</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> middleware = [</span><br><span class="line">        <span class="title class_">ReduxThunk</span></span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (__DEV__) &#123;</span><br><span class="line">        middleware = [...middleware];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">applyMiddleware</span>(...middleware);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> configureStore;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="設定ACTIONs"><a class="header-anchor" href="#設定ACTIONs"> </a>設定ACTIONs</h2>
<p>actions/Todo</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="variable constant_">TODO_ADD</span>, <span class="variable constant_">TODO_REMOVE</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../constants&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">task</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="variable constant_">TODO_ADD</span>,</span><br><span class="line">        <span class="attr">data</span>: task</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">remove</span>(<span class="params">task</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="variable constant_">TODO_REMOVE</span>,</span><br><span class="line">        <span class="attr">data</span>: task</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="設定可以使用的Reducers"><a class="header-anchor" href="#設定可以使用的Reducers"> </a>設定可以使用的Reducers</h3>
<p>reducers/index</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"><span class="comment">// reducer functions</span></span><br><span class="line"><span class="keyword">import</span> &#123;todo, newtodo&#125; <span class="keyword">from</span> <span class="string">&#x27;./todo&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下面的名稱是要存取store資料時的名稱</span></span><br><span class="line"><span class="comment">// ex. state.todo</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">combineReducers</span>(&#123;</span><br><span class="line">    todo,</span><br><span class="line">    newtodo</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>reducers/todo.ts</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; fromJS, <span class="title class_">List</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;immutable&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable constant_">TODO_ADD</span>, <span class="variable constant_">TODO_REMOVE</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../constants&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">INITIAL_STATE</span> = <span class="title class_">List</span>&lt;any&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// todo Reducer</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">todo</span>(<span class="params">state = INITIAL_STATE, action: any = &#123; type: <span class="string">&#x27;&#x27;</span> &#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="attr">TODO_ADD</span>:</span><br><span class="line">            <span class="keyword">return</span> state.<span class="title function_">push</span>(action.<span class="property">data</span>);</span><br><span class="line">        <span class="keyword">case</span> <span class="attr">TODO_REMOVE</span>:</span><br><span class="line">            <span class="keyword">return</span> state.<span class="title function_">remove</span>(state.<span class="title function_">indexOf</span>(action.<span class="property">data</span>));</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// newtodo Reducer</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">newtodo</span>(<span class="params">state = &#123; content: <span class="string">&#x27;&#x27;</span> &#125;, action: any = &#123; type: <span class="string">&#x27;&#x27;</span> &#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="attr">TODO_ADD</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">content</span>: <span class="string">&#x27;&#x27;</span> &#125;;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://github.com/chgc/Angular2WithRedux">CODE</a></p>
<p>參考資料:
- <a target="_blank" rel="noopener" href="https://medium.com/google-developer-experts/angular-2-introduction-to-redux-1cf18af27e6e#.yjn4pou3u">Angular 2 — Introduction to Redux</a>
- <a target="_blank" rel="noopener" href="http://ngcourse.rangle.io/handout/redux/index.html">Angular 2 and Redux</a>
- <a target="_blank" rel="noopener" href="https://github.com/reactjs/redux">redux</a>
- <a target="_blank" rel="noopener" href="https://github.com/wbuchwalter/ng2-redux">ng2-redux</a>
- <a target="_blank" rel="noopener" href="https://facebook.github.io/immutable-js/">immutable.js</a>
- <a target="_blank" rel="noopener" href="http://onehungrymind.com/build-better-angular-2-application-redux-ngrx/">work with service</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>

    
      <div>
        <div class="addthis_inline-share_toolbox">
   <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=" async="async"></script>
</div>        
      </div>
     
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://blog.kevinyang.net/2016/04/13/vs2015-uses-global-npm-version/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4550568.jpg">
      <meta itemprop="name" content="KevinYang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CK's Notepad">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/04/13/vs2015-uses-global-npm-version/" class="post-title-link" itemprop="url">[VS2015] 使用全域的NPM</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2016-04-14 04:03:00" itemprop="dateCreated datePublished" datetime="2016-04-14T04:03:00+08:00">2016-04-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Visual-Studio/" itemprop="url" rel="index"><span itemprop="name">Visual Studio</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2016/04/13/vs2015-uses-global-npm-version/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/13/vs2015-uses-global-npm-version/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>今天透過Visual studio 2015 執行webpack時，竟然返回錯誤訊息。
<img class="center" src="https://farm2.staticflickr.com/1718/26146425130_3a49b949a2_o.png">
我確定該webpack.config.js是可以跑的，但是為什麼在Visual studio 2015裡面執行卻是不行的，結果發現理由是node跟npm的版本有關係
我的webpack.config.js裡面有下’use strict’; 然後有使用到<strong>const</strong>, 所以VS就不開心了. 因為所使用的node版本不認識ES2015的東西.</p>
<p>解決方式是讓visual studio執行npm command時，使用本機電腦所使用的版本而不是Visual studio本身所用的版本, 將 ** $(PATH)**移到最上面
<img class="center" src="https://farm2.staticflickr.com/1602/25814380984_079d4fab3d_o.png"></p>
<p>這樣子的設定就可以讓VS在執行npm時，就會按照上圖的順序去找執行</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>

    
      <div>
        <div class="addthis_inline-share_toolbox">
   <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=" async="async"></script>
</div>        
      </div>
     
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://blog.kevinyang.net/2016/04/05/bot-formflow/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4550568.jpg">
      <meta itemprop="name" content="KevinYang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CK's Notepad">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/04/05/bot-formflow/" class="post-title-link" itemprop="url">[Bot] FormFlow</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2016-04-06 06:50:00" itemprop="dateCreated datePublished" datetime="2016-04-06T06:50:00+08:00">2016-04-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/BOT/" itemprop="url" rel="index"><span itemprop="name">BOT</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2016/04/05/bot-formflow/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/05/bot-formflow/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="http://docs.botframework.com/sdkreference/csharp/forms.html">基本版</a></p>
<p>根據官方文件的作法，當一個formflow完成後，那個Converstaion就會結束，不管之後再傳給bot什麼文字，Bot都不會有任何反應, 除非一個新的ConverstaionID重新建立</p>
<p>但是，在某些訊息環境，是沒有辦法更新ConverstaionID的. 這時候就需要自訂一個Dialog來處理FormComplete及其他的情形
就像官方文件所提到的Dialog是非常強大的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">[Serializable]</span><br><span class="line">    public class SandwichDialog : IDialog</span><br><span class="line">    &#123;</span><br><span class="line">        private readonly BuildForm&lt;SandwichOrder&gt; SandwichOrderForm;</span><br><span class="line"></span><br><span class="line">        internal SandwichDialog(BuildForm&lt;SandwichOrder&gt; SandwichOrderForm)</span><br><span class="line">        &#123;</span><br><span class="line">            this.SandwichOrderForm = SandwichOrderForm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public async Task StartAsync(IDialogContext context)</span><br><span class="line">        &#123;</span><br><span class="line">            context.Wait(MessageReceivedAsync);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public async Task MessageReceivedAsync(IDialogContext context, IAwaitable&lt;Message&gt; argument)</span><br><span class="line">        &#123;</span><br><span class="line">            var message = await argument;</span><br><span class="line">            var pizzaForm = new FormDialog&lt;SandwichOrder&gt;(new SandwichOrder(), this.SandwichOrderForm, FormOptions.PromptInStart);</span><br><span class="line">            context.Call&lt;SandwichOrder&gt;(pizzaForm, FormComplete);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        private async Task FormComplete(IDialogContext context, IAwaitable&lt;SandwichOrder&gt; result)</span><br><span class="line">        &#123;</span><br><span class="line">            SandwichOrder order = null;</span><br><span class="line">            try</span><br><span class="line">            &#123;</span><br><span class="line">                order = await result;</span><br><span class="line">            &#125;          </span><br><span class="line">            catch (OperationCanceledException)</span><br><span class="line">            &#123;</span><br><span class="line">                await context.PostAsync(&quot;You canceled the form!&quot;);</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            catch (Exception ex)</span><br><span class="line">            &#123;</span><br><span class="line">                await context.PostAsync(ex.Message);</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            if (order != null)</span><br><span class="line">            &#123;</span><br><span class="line">                await context.PostAsync(order.ToString());</span><br><span class="line">            &#125;</span><br><span class="line">            else</span><br><span class="line">            &#123;</span><br><span class="line">                await context.PostAsync(&quot;Form returned empty response!&quot;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            context.Wait(MessageReceivedAsync);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>這個是當pizzaForm完成後，則執行FormComplete.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.Call&lt;T&gt;(pizzaForm, FormComplete);</span><br></pre></td></tr></table></figure>
<p>在 FormComplete 裡面，可以取得使用者所輸入的選項，所以後續要處理的動作會寫在此處</p>
<p><a target="_blank" rel="noopener" href="https://gist.github.com/chgc/773cfc50587e0d6a000884616d27273f">Gist</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>

    
      <div>
        <div class="addthis_inline-share_toolbox">
   <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=" async="async"></script>
</div>        
      </div>
     
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://blog.kevinyang.net/2016/03/31/bot-to-write-a-bot-makes-me-think-of-msn-bot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4550568.jpg">
      <meta itemprop="name" content="KevinYang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CK's Notepad">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/03/31/bot-to-write-a-bot-makes-me-think-of-msn-bot/" class="post-title-link" itemprop="url">[Bot] 來寫Bot吧...讓我想起 MSN Bot了</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2016-04-01 01:53:00" itemprop="dateCreated datePublished" datetime="2016-04-01T01:53:00+08:00">2016-04-01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/BOT/" itemprop="url" rel="index"><span itemprop="name">BOT</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2016/03/31/bot-to-write-a-bot-makes-me-think-of-msn-bot/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/03/31/bot-to-write-a-bot-makes-me-think-of-msn-bot/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>先從基本的開始，跟著下面的文章做，就可以完成基本的Bot功能了
<a target="_blank" rel="noopener" href="http://docs.botframework.com/connector/getstarted/#navtitle">http://docs.botframework.com/connector/getstarted/#navtitle</a></p>
<p><strong>注意事項</strong></p>
<ol>
<li>
<p>當在新增【My Bot】時，Endpoint的網址一定要用<strong>https</strong>, 不然之後在測試Bot Connector時會出現403, 無法授權等奇怪的狀況.</p>
</li>
<li>
<p>如果使用web chat embed code時，要把他們所提供網址裡的s=[secret] 改成 t=[secret]</p>
</li>
</ol>
<p>###程式基本的運作方式</p>
<p>Bot在與Bot Connector之間的溝通是透過傳遞Message.
這個Message裡面會包含很多資訊，也可以保留狀態(所以可以建立一連串的問題，就像在執行npm init時會問一堆問題一樣)
<a target="_blank" rel="noopener" href="http://docs.botframework.com/connector/message-types/#navtitle">網站參考</a></p>
<p>總結: 一切都是在玩弄Message這個物件阿.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>

    
      <div>
        <div class="addthis_inline-share_toolbox">
   <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=" async="async"></script>
</div>        
      </div>
     
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://blog.kevinyang.net/2016/03/27/mvc-core-run-with-docker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4550568.jpg">
      <meta itemprop="name" content="KevinYang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CK's Notepad">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/03/27/mvc-core-run-with-docker/" class="post-title-link" itemprop="url">[MVC Core] Run with Docker</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2016-03-27 14:43:00" itemprop="dateCreated datePublished" datetime="2016-03-27T14:43:00+08:00">2016-03-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ASP-NET-MVC/" itemprop="url" rel="index"><span itemprop="name">ASP.NET MVC</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2016/03/27/mvc-core-run-with-docker/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/03/27/mvc-core-run-with-docker/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>基於Docker安裝步驟變簡單了，所以是時候來玩Docker了.
在MVC Core的目錄下，新增一個檔案Dockfile, 內容如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">FROM microsoft/aspnet:1.0.0-rc1-update1</span><br><span class="line"></span><br><span class="line">COPY . /app</span><br><span class="line">WORKDIR /app</span><br><span class="line">RUN [&quot;dnu&quot;, &quot;restore&quot;]</span><br><span class="line"></span><br><span class="line">EXPOSE 5000/tcp</span><br><span class="line">ENTRYPOINT [&quot;dnx&quot;, &quot;-p&quot;, &quot;project.json&quot;, &quot;web&quot;,&quot;--server.urls&quot;, &quot;http://0.0.0.0:5000&quot;]</span><br></pre></td></tr></table></figure>
<p>**server.urls 需要指定到0.0.0.0:port, 不然在docker run起來的時候，網頁會說Refused to Connect
server.urls的設定方式可以參考<a target="_blank" rel="noopener" href="http://docs.asp.net/en/latest/fundamentals/servers.html">這裡</a></p>
<p>開啟命令視窗，到有Dockerfile檔案的資料夾並執行下列指令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t &lt;imageName&gt; .</span><br></pre></td></tr></table></figure>
<p>上列指令這會建立一個docker image file
接下來就要讓所建立出來的Image執行起來, 執行下列指令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -t -d -p 5000:5000 &lt;imageName&gt;</span><br></pre></td></tr></table></figure>
<p>詳細的Docker指令用法，請參閱官方網站</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>

    
      <div>
        <div class="addthis_inline-share_toolbox">
   <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=" async="async"></script>
</div>        
      </div>
     
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://blog.kevinyang.net/2016/03/27/685100/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4550568.jpg">
      <meta itemprop="name" content="KevinYang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CK's Notepad">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/03/27/685100/" class="post-title-link" itemprop="url">[Docker] Installing Docker on Windows 問題集</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2016-03-27 12:18:00" itemprop="dateCreated datePublished" datetime="2016-03-27T12:18:00+08:00">2016-03-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2016/03/27/685100/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/03/27/685100/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>###今天下載了docker Toolbox for windows ，根據<a target="_blank" rel="noopener" href="https://docs.docker.com/windows/step_one/">安裝指示</a>安裝後，在執行時出現了一個錯誤訊息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hyper-v is installed. virtualbox won&#x27;t boot a 64 bits vm in hyper-v is activated ....</span><br></pre></td></tr></table></figure>
<p>排除方式為:修改 Program Files\Docker Toolbox\<a target="_blank" rel="noopener" href="http://start.sh">start.sh</a>
在start.sh檔裡面，尋找</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;$&#123;DOCKER_MACHINE&#125;&quot; create -d virtualbox &quot;$&#123;VM&#125;&quot; </span><br></pre></td></tr></table></figure>
<p>更改成</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;$&#123;DOCKER_MACHINE&#125;&quot; create --virtualbox-no-vtx-check -d virtualbox &quot;$&#123;VM&#125;&quot;</span><br></pre></td></tr></table></figure>
<p>即可排除此錯誤訊息</p>
<p>###當在command下docker command時，出現以下錯誤訊息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">An error occurred trying to connect: Get http://127.0.0.1:2375/v1.22/containers/json: dial tcp 127.0.0.1:2375: connectex: No connection could be made because the target machine actively refused it.</span><br></pre></td></tr></table></figure>
<p>排除方式為</p>
<ol>
<li><strong>docker-machine start default</strong> or create new one</li>
<li><strong>docker-machine</strong> ls will show you your machine running</li>
<li><strong>docker-machine env --shell cmd default</strong> and you’ll see something like</li>
</ol>
<blockquote>
<p>SET DOCKER_TLS_VERIFY=1
SET DOCKER_HOST=tcp://xxx.xxx.xxx.xxx:2376
SET DOCKER_CERT_PATH=C:\Users\Arseny.docker\machine\machines\default
SET DOCKER_MACHINE_NAME=default
REM Run this command to configure your shell:
REM     FOR /f 「tokens=*」 %i IN (『docker-machine env --shell cmd default』) DO %i</p>
</blockquote>
<p>4.Run</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FOR /f &quot;tokens=*&quot; %i IN (&#x27;docker-machine env --shell cmd default&#x27;) DO %i</span><br></pre></td></tr></table></figure>
<p>5.Enjoy. 就可以正常的下docker指令了</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>

    
      <div>
        <div class="addthis_inline-share_toolbox">
   <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=" async="async"></script>
</div>        
      </div>
     
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://blog.kevinyang.net/2016/01/20/note-gulpfilejs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4550568.jpg">
      <meta itemprop="name" content="KevinYang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CK's Notepad">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/note-gulpfilejs/" class="post-title-link" itemprop="url">[Note] Gulpfile.js <my version!></a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2016-01-21 05:54:00" itemprop="dateCreated datePublished" datetime="2016-01-21T05:54:00+08:00">2016-01-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Note/" itemprop="url" rel="index"><span itemprop="name">Note</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2016/01/20/note-gulpfilejs/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/01/20/note-gulpfilejs/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>目前開發所需的gulpfile.js版本
工作流程 for angular 1.x開發
[typescript]-&gt;[javascript]-&gt;[webpack]-&gt;bundle.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">&#x27;use strict&#x27;;</span><br><span class="line"></span><br><span class="line">var gulp = require(&#x27;gulp&#x27;),</span><br><span class="line">    tsc = require(&#x27;gulp-typescript&#x27;),</span><br><span class="line">    inject = require(&#x27;gulp-inject&#x27;),</span><br><span class="line">    tsProject = tsc.createProject(&#x27;tsconfig.json&#x27;),</span><br><span class="line">    webpack = require(&#x27;webpack&#x27;),</span><br><span class="line">    gulpWebpack = require(&#x27;webpack-stream&#x27;),</span><br><span class="line">    ngAnnotatePlugin = require(&#x27;ng-annotate-webpack-plugin&#x27;),</span><br><span class="line">    path = require(&#x27;path&#x27;);</span><br><span class="line"></span><br><span class="line">gulp.task(&#x27;compile-ts&#x27;, function () &#123;</span><br><span class="line">    var sourceTsFiles = [&#x27;./app/src/**/*.ts&#x27;,                //path to typescript files</span><br><span class="line">                         &#x27;./app/typings/**/*.ts&#x27;]; //reference to library .d.ts files</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    var tsResult = gulp.src(sourceTsFiles)</span><br><span class="line">                       .pipe(tsc(tsProject));</span><br><span class="line"></span><br><span class="line">    tsResult.dts.pipe(gulp.dest(&#x27;./app/dist&#x27;));</span><br><span class="line">    return tsResult.js.pipe(gulp.dest(&#x27;./app/dist&#x27;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"> gulp.task(&#x27;gen-ts-refs&#x27;, function () &#123;</span><br><span class="line">     var target = gulp.src(&#x27;./app/src/app.d.ts&#x27;);</span><br><span class="line">     var sources = gulp.src([&#x27;./app/src/**/*.ts&#x27;], &#123; read: false &#125;);</span><br><span class="line">     return target.pipe(inject(sources, &#123;</span><br><span class="line">         starttag: &#x27;//&#123;&#x27;,</span><br><span class="line">         endtag: &#x27;//&#125;&#x27;,</span><br><span class="line">         transform: function (filepath) &#123;</span><br><span class="line">             if (filepath.indexOf(&#x27;index&#x27;) &gt; -1) &#123; return; &#125;</span><br><span class="line">             if (filepath.indexOf(&#x27;app.d.ts&#x27;) &gt; -1) &#123; return; &#125;</span><br><span class="line">             return &#x27;/// &lt;reference path=&quot;../..&#x27; + filepath + &#x27;&quot; /&gt;&#x27;;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;)).pipe(gulp.dest(&#x27;./app/src/&#x27;));</span><br><span class="line"> &#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(&#x27;watch&#x27;, function () &#123;</span><br><span class="line">    gulp.watch([&#x27;./app/src/**/*.ts&#x27;], [&#x27;webpack&#x27;]);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(&#x27;webpack&#x27;, [&#x27;compile-ts&#x27;], function () &#123;</span><br><span class="line">    return gulp.src(&#x27;./app/dist/app.js&#x27;)</span><br><span class="line">      .pipe(gulpWebpack(&#123;          </span><br><span class="line">          entry: &#123;</span><br><span class="line">              bundled: &#x27;./app/dist/app.js&#x27;,</span><br><span class="line">              commands: &#x27;./app/dist/libs.js&#x27;</span><br><span class="line">          &#125;,</span><br><span class="line">          output: &#123;</span><br><span class="line">              filename: &#x27;[name].js&#x27;,</span><br><span class="line">          &#125;,</span><br><span class="line">          resolve: &#123;</span><br><span class="line">              // this tells Webpack where actually to find lodash because you&#x27;ll need it in the ProvidePlugin</span><br><span class="line">              alias: &#123;</span><br><span class="line">                  lodash: path.resolve(__dirname, &#x27;./node_modules/lodash&#x27;),</span><br><span class="line">                  angular: path.resolve(__dirname, &#x27;./node_modules/angular&#x27;)</span><br><span class="line">              &#125;,</span><br><span class="line">              extensions: [&#x27;&#x27;, &#x27;.js&#x27;]</span><br><span class="line">          &#125;,</span><br><span class="line">          module: &#123;</span><br><span class="line">              loaders: [</span><br><span class="line">                  &#123; test: /[\/]angular\.js$/, loader: &quot;exports?angular&quot; &#125;</span><br><span class="line">              ]</span><br><span class="line">          &#125;,</span><br><span class="line">          plugins: [</span><br><span class="line">              new webpack.ContextReplacementPlugin(/moment[\/\\]locale$/, /en/),</span><br><span class="line">              // this tells Webpack to provide the &quot;_&quot; variable globally in all your app files as lodash.</span><br><span class="line">              new webpack.ProvidePlugin(&#123;</span><br><span class="line">                  _: &quot;lodash&quot;,</span><br><span class="line">              &#125;),</span><br><span class="line">              new ngAnnotatePlugin(&#123;</span><br><span class="line">                  add: true</span><br><span class="line">              &#125;)</span><br><span class="line">              // new webpack.optimize.CommonsChunkPlugin(&#x27;common.js&#x27;),</span><br><span class="line">              //new webpack.optimize.UglifyJsPlugin(&#123;</span><br><span class="line">              //    compress: &#123;</span><br><span class="line">              //        warnings: false</span><br><span class="line">              //    &#125;,</span><br><span class="line">              //    output: &#123; comments: false &#125;</span><br><span class="line">              //&#125;)</span><br><span class="line"></span><br><span class="line">          ]</span><br><span class="line">      &#125;))</span><br><span class="line">      .pipe(gulp.dest(&#x27;./Scripts&#x27;));</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">gulp.task(&#x27;default&#x27;, [&#x27;watch&#x27;]);</span><br></pre></td></tr></table></figure>
<p>package.json</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">&quot;devDependencies&quot;: &#123;</span><br><span class="line">    &quot;gulp&quot;: &quot;^3.9.0&quot;,</span><br><span class="line">    &quot;gulp-inject&quot;: &quot;^3.0.0&quot;,</span><br><span class="line">    &quot;gulp-typescript&quot;: &quot;^2.10.0&quot;,</span><br><span class="line">    &quot;gulp-tsd&quot;: &quot;^0.0.4&quot;,</span><br><span class="line">    &quot;tsd&quot;: &quot;^0.6.5&quot;,</span><br><span class="line">    &quot;typescript&quot;: &quot;^1.7.5&quot;,</span><br><span class="line">    &quot;ng-annotate-webpack-plugin&quot;: &quot;^0.1.2&quot;,</span><br><span class="line">    &quot;path&quot;: &quot;^0.11.14&quot;,</span><br><span class="line">    &quot;webpack&quot;: &quot;^1.11.0&quot;,</span><br><span class="line">    &quot;webpack-stream&quot;: &quot;^2.1.0&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;angular&quot;: &quot;^1.4.8&quot;,</span><br><span class="line">    &quot;lodash&quot;: &quot;^4.0.0&quot;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>需要disable visual studio裡面對於typescript的compile，編輯csproj的第一個<PropertyGroup></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">加入這個讓vs不要在Build的時候編譯Typescript</span><br><span class="line">&lt;TypeScriptCompileBlocked&gt;true&lt;/TypeScriptCompileBlocked&gt;</span><br></pre></td></tr></table></figure>
<p>另外需要</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;PropertyGroup Condition=&quot; &#x27;$(Configuration)|$(Platform)&#x27; == &#x27;Debug|AnyCPU&#x27; &quot;&gt;</span><br><span class="line">在這個項目下，增加</span><br><span class="line">&lt;TypeScriptModuleKind&gt;commonjs&lt;/TypeScriptModuleKind&gt;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>

    
      <div>
        <div class="addthis_inline-share_toolbox">
   <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=" async="async"></script>
</div>        
      </div>
     
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://blog.kevinyang.net/2016/01/14/angular2-outputs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4550568.jpg">
      <meta itemprop="name" content="KevinYang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CK's Notepad">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/14/angular2-outputs/" class="post-title-link" itemprop="url">[Angular] Outputs & Inputs</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2016-01-14 15:15:00" itemprop="dateCreated datePublished" datetime="2016-01-14T15:15:00+08:00">2016-01-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Angular/" itemprop="url" rel="index"><span itemprop="name">Angular</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2016/01/14/angular2-outputs/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/01/14/angular2-outputs/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Angular 在 Components之間的值得傳遞方式分割成Inputs和Outputs.
寫法如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@Components(&#123;</span><br><span class="line">     ....,</span><br><span class="line">     inputs:[&#x27;init&#x27;],</span><br><span class="line">     outputs:[&#x27;finish&#x27;] </span><br><span class="line">&#125;)</span><br><span class="line">export class xxx()&#123;</span><br><span class="line">	okEvent: EventEmitter&lt;any&gt; = new EventEmitter();</span><br><span class="line">  </span><br><span class="line">  ok()&#123;</span><br><span class="line">     // this should match the type define in EventEmitter</span><br><span class="line">     this.okEvent.emit(&#x27;the value want to pass&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// in another components</span><br><span class="line">&lt;ddd (finish)=&quot;finish($event)&quot; [init]=&quot;value pass in&quot;&gt;&lt;/ddd&gt;</span><br><span class="line"></span><br><span class="line">$event =&gt; will catch the return value</span><br></pre></td></tr></table></figure>
<p>另外一種寫法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component, View, Input, Output, EventEmitter &#125; from &#x27;angular2/angular2&#x27;;</span><br><span class="line"></span><br><span class="line">@Components(&#123;</span><br><span class="line">     ....</span><br><span class="line">&#125;)</span><br><span class="line">export class xxx()&#123;</span><br><span class="line">  @Input() init;</span><br><span class="line">  // @Output(alias name)</span><br><span class="line">  @Output(&#x27;finish&#x27;) okEvent:EventEmitter&lt;Any&gt; = new EventEmitter();</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  ok()&#123;</span><br><span class="line">     // this should match the type define in EventEmitter if use typescript</span><br><span class="line">     this.okEvent.emit(&#x27;the value want to pass&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// in another components</span><br><span class="line">&lt;ddd (finish)=&quot;finish($event)&quot; [init]=&quot;value pass in&quot;&gt;&lt;/ddd&gt;</span><br><span class="line"></span><br><span class="line">$event =&gt; will catch the return value</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>

    
      <div>
        <div class="addthis_inline-share_toolbox">
   <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=" async="async"></script>
</div>        
      </div>
     
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://blog.kevinyang.net/2016/01/11/ef-entity-framework-7-migration-with-exist-database/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4550568.jpg">
      <meta itemprop="name" content="KevinYang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CK's Notepad">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/11/ef-entity-framework-7-migration-with-exist-database/" class="post-title-link" itemprop="url">[EF] Entity Framework Core 1.0 - Migration with Exist Database</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2016-01-12 02:12:00" itemprop="dateCreated datePublished" datetime="2016-01-12T02:12:00+08:00">2016-01-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Entity-Framework/" itemprop="url" rel="index"><span itemprop="name">Entity Framework</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2016/01/11/ef-entity-framework-7-migration-with-exist-database/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/01/11/ef-entity-framework-7-migration-with-exist-database/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>After Scaffold from existing datbase, and then add migration at first time.</p>
<p><img src="https://farm2.staticflickr.com/1598/24326751835_e0c5dcabcc_o.png" alt=""></p>
<p>EF will create something like above. But in first migration will have everything that already existed in database. therefore, delete that file and add migration again. Now this time. you will get an empty migration file. WHy? because ContextModelSnapShot. It seems EF will compare all model files with snapshot file. and find the differences to create migration content file.</p>
<p>And Now it switch to Code first mode. ^^</p>
<p><a target="_blank" rel="noopener" href="https://ef.readthedocs.org/en/latest/getting-started/index.html">EF 7 Doc</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>

    
      <div>
        <div class="addthis_inline-share_toolbox">
   <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=" async="async"></script>
</div>        
      </div>
     
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://blog.kevinyang.net/2015/12/16/mvc-6-authorize-redirect-to-login-page/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4550568.jpg">
      <meta itemprop="name" content="KevinYang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CK's Notepad">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/12/16/mvc-6-authorize-redirect-to-login-page/" class="post-title-link" itemprop="url">[MVC 6] Authorize Redirect to Login Page</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2015-12-16 13:23:00" itemprop="dateCreated datePublished" datetime="2015-12-16T13:23:00+08:00">2015-12-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ASP-NET-MVC/" itemprop="url" rel="index"><span itemprop="name">ASP.NET MVC</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2015/12/16/mvc-6-authorize-redirect-to-login-page/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/12/16/mvc-6-authorize-redirect-to-login-page/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="http://docs.asp.net/en/latest/security/authorization/simple.html">http://docs.asp.net/en/latest/security/authorization/simple.html</a>
這裡描述怎麼設定頁面授權的方式，<s>可是卻都沒有提到如果說沒授權的人要頁面轉至登入畫面的方式</s></p>
<p>經過網頁上的查詢及測試後. 在1.0.0-rc1-update1的版本裡，設定方式如下</p>
<ol>
<li>startup.cs</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public void ConfigureServices(IServiceCollection services)</span><br><span class="line">&#123;</span><br><span class="line">    services.AddAuthentication();           </span><br><span class="line">    .....</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> public void Configure(IApplicationBuilder app, IHostingEnvironment env)</span><br><span class="line">&#123;</span><br><span class="line">    app.UseCookieAuthentication(options =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        options.LoginPath = &quot;/Home/Login&quot;;</span><br><span class="line">        options.AutomaticAuthenticate = true;</span><br><span class="line">        options.AutomaticChallenge = true;</span><br><span class="line">    &#125;);</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>到這裡為止就可以做出跟以前一樣遇到沒有授權的頁面就轉到登入畫面了</p>
<p>###參數說明</p>
<p>重點在於AutomaticAuthenticate 及 AutomaticChallenge 這兩個參數
他的說明如下:</p>
<ol>
<li>AutomaticAuthenticate: If true the authentication middlleware alter the request user coming in. If false the authentication middleware will only provide identity when explicitly indicated by the AuthenticationScheme.</li>
<li>AutomaticChallenge: If true the authentication middleware should handle automatic challenge. If false the authentication middleware will only alter responses when explicitly indicated by the AuthenticationScheme.</li>
</ol>
<p>這裡出現另外一個參數 AuthenticationScheme
AuthenticationScheme: The AuthenticationScheme in the options corresponds to the logical name for a particular authentication scheme. A different value may be assigned in order to use the same authentication middleware type more than once in a pipepline.</p>
<p>這表示在Controller裡的[Authorize]可以指定AuthenticationScheme, 就可以做出很有彈性的權限設定轉址或是其他後續動作了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[Authorize(ActiveAuthenticationSchemes =&quot;abc&quot;)]</span><br><span class="line">public IActionResult Index()&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>##update
設定頁面授權的方式在這裡 <a target="_blank" rel="noopener" href="http://docs.asp.net/en/latest/security/authentication/cookie.html">http://docs.asp.net/en/latest/security/authentication/cookie.html</a></p>
<h3 id="Reference"><a class="header-anchor" href="#Reference"> </a>Reference</h3>
<p><a target="_blank" rel="noopener" href="http://blueprogram.blogspot.tw/2015/12/aspnet-5mvc-6-claim.html">ASP.NET 5/MVC 6 自訂使用Claim驗証</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>

    
      <div>
        <div class="addthis_inline-share_toolbox">
   <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=" async="async"></script>
</div>        
      </div>
     
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/25/"><i class="fa fa-angle-left" aria-label="上一頁"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/25/">25</a><span class="page-number current">26</span><a class="page-number" href="/page/27/">27</a><span class="space">&hellip;</span><a class="page-number" href="/page/34/">34</a><a class="extend next" rel="next" href="/page/27/"><i class="fa fa-angle-right" aria-label="下一頁"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="KevinYang"
      src="/images/4550568.jpg">
  <p class="site-author-name" itemprop="name">KevinYang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">336</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">41</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">72</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/chgc" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;chgc" rel="noopener" target="_blank"><i class="fa fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/yoKevinYang" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;yoKevinYang" rel="noopener" target="_blank"><i class="fa fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.facebook.com/CKNotepad" title="FB Page → https:&#x2F;&#x2F;www.facebook.com&#x2F;CKNotepad" rel="noopener" target="_blank"><i class="fa fa-facebook fa-fw"></i>FB Page</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://blog.miniasp.com/" title="https:&#x2F;&#x2F;blog.miniasp.com&#x2F;" rel="noopener" target="_blank">The Will Will Web | Will 保哥</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://wellwind.idv.tw/blog/" title="https:&#x2F;&#x2F;wellwind.idv.tw&#x2F;blog&#x2F;" rel="noopener" target="_blank">全端開發人員天梯</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://poychang.github.io/" title="https:&#x2F;&#x2F;poychang.github.io&#x2F;" rel="noopener" target="_blank">POY CHANG | Trial and Error</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://jeffwu85182.github.io/" title="https:&#x2F;&#x2F;jeffwu85182.github.io&#x2F;" rel="noopener" target="_blank">Jeffs WebTech Note</a>
        </li>
    </ul>
  </div>

      </div>
        <!--google_adsense-->
        
          <div class="links-of-blogroll-title">
            <i class="fa fa-google"></i> 廣告
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-7997572949867824"
                data-ad-slot="3959999538"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
          </div>
        
        <!--/google_adsense-->
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>    
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">KevinYang</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 強力驅動
  </div>
  <div class="addthis_inline_share_toolbox">
    <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-587058bb56929fc8" async="async"></script>
  </div>

        








      </div>
    </footer>

    

    

    
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://cksnotepad.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
